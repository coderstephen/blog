<Project Sdk="Microsoft.NET.Sdk.Web">
    <PropertyGroup>
        <TargetFramework>netcoreapp3.1</TargetFramework>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="Autofac" Version="5.2.0" />
        <PackageReference Include="Autofac.Extensions.DependencyInjection" Version="6.0.0" />
        <PackageReference Include="GitInfo" Version="2.1.2" />
        <PackageReference Include="hashids.net" Version="1.3.0" />
        <PackageReference Include="HtmlSanitizer" Version="5.0.343" />
        <PackageReference Include="Humanizer.Core" Version="2.8.26" />
        <PackageReference Include="Markdig" Version="0.22.0" />
        <PackageReference Include="Microsoft.Data.SQLite" Version="3.1.8" />
        <PackageReference Include="Nett" Version="0.15.0" />
    </ItemGroup>

    <ItemGroup>
        <EmbeddedResource Include="articles/*.md" />
    </ItemGroup>

    <Target Name="CompileSass" BeforeTargets="Build">
        <MakeDir Directories="$(ProjectDir)/wwwroot/css" />
        <Exec WorkingDirectory="$(ProjectDir)" Command="sassc --style compressed scss/main.scss wwwroot/css/main.css" />
    </Target>

    <ItemGroup>
        <Watch Include="scss/**/*.scss" />
    </ItemGroup>

    <Target Name="Version" DependsOnTargets="GitVersion" BeforeTargets="CoreCompile">
        <PropertyGroup>
            <InformationalVersion>g$(GitCommit)</InformationalVersion>
        </PropertyGroup>
        <Message Text="Project version: $(InformationalVersion)" Importance="high" />
    </Target>
</Project>
